<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Font Awosome -->
  <link rel="stylesheet" data-purpose="Layout StyleSheet" title="Web Awesome"
    href="/css/app-wa-8106c2e05ae3cd7bfbb686f33d73a923.css?vsn=d" />
  <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.1/css/all.css" />
  <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.1/css/sharp-thin.css" />
  <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.1/css/sharp-solid.css" />
  <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.1/css/sharp-regular.css" />
  <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.1/css/sharp-light.css" />

  <!-- Font link -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet" />

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.1/css/all.css" />
  <title>Host Panel</title>

  <style>
    /* Resetting default browser styles */
    html,
    body,
    div,
    span,
    applet,
    object,
    iframe,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    p,
    blockquote,
    pre,
    a,
    abbr,
    acronym,
    address,
    big,
    cite,
    code,
    del,
    dfn,
    em,
    ins,
    kbd,
    q,
    s,
    samp,
    small,
    strike,
    strong,
    sub,
    sup,
    tt,
    var,
    b,
    u,
    i,
    center,
    dl,
    dt,
    dd,
    ol,
    ul,
    li,
    fieldset,
    form,
    label,
    legend,
    table,
    caption,
    tbody,
    tfoot,
    thead,
    tr,
    th,
    td,
    article,
    aside,
    canvas,
    details,
    embed,
    figure,
    figcaption,
    footer,
    header,
    hgroup,
    menu,
    nav,
    output,
    ruby,
    section,
    summary,
    time,
    mark,
    audio,
    video {
      margin: 0;
      padding: 0;
    }

    /* Box sizing */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    li,
    ol,
    ul {
      list-style: none;
    }

    /* Global Typography */
    body {
      font-family: "Poppins", sans-serif;
    }

    /* Links */
    a {
      text-decoration: none;
    }

    :root {
      --blue-colour: #1c1e53;
      --gray-colour: #f4f6fc;
      --text-colur: #282938;
      --white-colour: #ffffff;
      --yellow-colour: #fcd980;
      --coco-colur: #ed9455;
      --light-coco-colur: #ffbb70;
      --more-light-coco-colur: #ffec9e;
    }

    video {
      width: 100%;
    }

    /* ============================= Custom CSS ==================== */
    /* ============================= Navbar CSS ==================== */
    .customNav {
      padding: 10px 0;
      background-color: var(--blue-colour);
      align-items: center;
    }

    .navbar__logo {
      width: 300px;
      height: auto;
      text-align: left;
    }

    .customItem {
      padding: 20px 10px;
      font-size: 20px;
      color: var(--blue-colour);
      transition: ease-in-out 0.1s;
    }

    .custombtn {
      padding: 7px 17px;
      margin: 0 4px;
      background-color: var(--blue-colour);
      border: 2px solid var(--gray-colour);
      outline: none;
      border-radius: 15px;
      transition: ease-in-out 0.2s;
      color: white;
      /* margin-bottom: 20px; */
    }

    .custombtn:hover {
      background-color: var(--more-light-coco-colur);
      color: black;
      border: 2px solid --gray-colour;
    }

    /* ============================= Navbar CSS ==================== */
    /* ============================= Log in CSS ==================== */
    #servicepart {
      padding: 50px 0;
      background-image: url(./photos/back.jpg);
      background-repeat: no-repeat;
      background-position: center;
      background-size: cover;
      background-color: rgba(0, 0, 0, 0.5);
    }

    .servicepart__heading__h3 {
      font-weight: 600;
      font-size: 48px;
      padding: 20px 0;
    }

    .serviceitem {
      /* background-color: #fc3f00b6; */
      background-color: #fc8e28c9;
      padding: 60px 20px;
      border-radius: 10px;
      color: black;
      text-align: center;
      transition: ease-in-out 0.2s;
      height: 320px;
    }

    .serviceitem:hover {
      background-color: lightblue;
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }

    .serviceitem__icon {
      font-size: 80px;
      color: #000000;
      text-align: center;
    }

    .serviceitem__h3 {
      font-size: 30px;
      font-weight: 500;
    }

    .serviceitem__p {
      font-size: 18px;
      font-weight: 400;
      color: var(--text-colur);
      line-height: 28px;
    }

    /* ============================= Log in CSS ==================== */
    /* ================================= footer Part ===================== */
    #footerpart {
      background-color: var(--blue-colour);
      padding: 50px 50px 30px 50px;
    }

    #footerbottom {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
    }

    .footerTopLeft__p {
      font-size: 16px;
      font-weight: 500;
    }

    .footerTopBottom h3 {
      font-size: 18px;
      font-weight: 500;
    }

    .footerTopBottom a {
      color: #1c1e53;
      margin-top: 20px;
      font-weight: 400;
      font-size: 14px;
    }

    .footer__logo {
      height: 100px;
    }

    .footerLeftBottom {
      background-color: var(--yellow-colour);
      margin-top: 70px;
      padding: 15px 10px;
    }

    .footerRight__h3 {
      font-size: 48px;
      font-weight: 600;
    }

    .footerRight__p {
      font-size: 16px;
      font-weight: 400;
    }

    .icons {
      margin-top: 10px;
    }

    .icons a {
      padding: 10px;
      color: white;
    }

    body {
      background-color: #f8f9fa;
    }

    .slot-system-card {
      border: none;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .slot-system-card .card-header {
      background-color: #d1d1d1;
      color: black;
      font-size: 1.5rem;
      font-weight: bold;
      text-align: center;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
    }

    .day-checkbox label {
      display: block;
      padding: 5px 10px;
      margin-bottom: 5px;
      background-color: #e9ecef;
      border-radius: 5px;
      transition: background-color 0.3s;
    }

    .day-checkbox input:checked+label {
      background-color: #007bff;
      color: #fff;
    }

    .time-input {
      width: 100%;
      max-width: 200px;
    }

    .create-slot-btn {
      width: 100%;
      font-size: 1.2rem;
    }

    /* Loader styles */
    .loader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(255, 255, 255, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .spinner {
      border: 5px solid #f3f3f3;
      /* Light grey */
      border-top: 5px solid #3498db;
      /* Blue */
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    /* Hide loader after loading */
    .hidden {
      display: none;
    }

    /* ================================= footer Part ===================== */
  </style>
</head>

<body>

  <!-- Loader -->
  <div id="loader" class="loader">
    <div class="spinner"></div>
  </div>
  <!-- ========================= Navbar =========================== -->
  <nav class="navbar navbar-expand-lg customNav">
    <div class="container">
      <a class="navbar-brand" href="index.html">
        <h2 class="text-white text-left">Meeting Management</h2>
      </a>
      <div class="btn-group">
        <div class="btn-group">
          <button type="button" class="btn btn-primary me-2">
            Notifications <span class="badge badge-light">4</span>
          </button>
          <button type="button" class="btn btn-success" onclick="window.location.href='host_panel.html';"
            aria-expanded="false">Back</button>
        </div>

      </div>
    </div>
  </nav>
  <!-- ========================= Navbar =========================== -->

  <section id="login__part">
  </section>

  <!-- ========================= recurring slot system =========================== -->

  <div class="container my-5">
    <div class="card slot-system-card">
      <div class="card-header">Recurring Slot System</div>
      <div class="card-body">
        <form>
          <div class="row">
            <!-- Days Section -->
            <div class="col-md-6">
              <h5>Select Days</h5><br>
              <div class="form-check day-checkbox">
                <input class="form-check-input" type="checkbox" id="monday" name="days[]" value="Monday">
                <label class="form-check-label" for="monday">Monday</label>
              </div>
              <div class="form-check day-checkbox">
                <input class="form-check-input" type="checkbox" id="tuesday" name="days[]" value="Tuesday">
                <label class="form-check-label" for="tuesday">Tuesday</label>
              </div>
              <div class="form-check day-checkbox">
                <input class="form-check-input" type="checkbox" id="wednesday" name="days[]" value="Wednesday">
                <label class="form-check-label" for="wednesday">Wednesday</label>
              </div>
              <div class="form-check day-checkbox">
                <input class="form-check-input" type="checkbox" id="thursday" name="days[]" value="Thursday">
                <label class="form-check-label" for="thursday">Thursday</label>
              </div>
              <div class="form-check day-checkbox">
                <input class="form-check-input" type="checkbox" id="friday" name="days[]" value="Friday">
                <label class="form-check-label" for="friday">Friday</label>
              </div>
              <div class="form-check day-checkbox">
                <input class="form-check-input" type="checkbox" id="saturday" name="days[]" value="Saturday">
                <label class="form-check-label" for="saturday">Saturday</label>
              </div>
              <div class="form-check day-checkbox">
                <input class="form-check-input" type="checkbox" id="sunday" name="days[]" value="Sunday">
                <label class="form-check-label" for="sunday">Sunday</label>
              </div>
            </div>
            <!-- Time Section -->
            <div class="col-md-6">
              <h5>Set Time</h5>
              <div class="mb-3">
                <label for="start-time" class="form-label">Start Time</label>
                <input type="time" id="start-time" name="start_time" class="form-control time-input">
              </div>
              <div class="mb-3">
                <label for="end-time" class="form-label">End Time</label>
                <input type="time" id="end-time" name="end_time" class="form-control time-input">
              </div>
            </div>
          </div>
          <div class="mt-4 text-center">
            <button type="submit" class="btn custombtn" id="btnSubmit">Create Slot</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!-- ========================= recurring slot system =========================== -->

  <!-- ========================= Previously created slot =========================== -->

  <div class="container my-5">
    <div class="card slot-system-card">
      <div class="card-header">Created Slots</div>
      <div class="card-body">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Day</th>
              <th>Previously Created Slots</th>
            </tr>
          </thead>
          <tbody id="booked-slots-table">
            <tr>
              <td>Sunday</td>
              <td class="Sunday"></td>
            </tr>
            <tr>
              <td>Monday</td>
              <td class="Monday"></td>
            </tr>
            <tr>
              <td>Tuesday</td>
              <td class="Tuesday"></td>
            </tr>
            <tr>
              <td>Wednesday</td>
              <td class="Wednesday"></td>
            </tr>
            <tr>
              <td>Thursday</td>
              <td class="Thursday"></td>
            </tr>
            <tr>
              <td>Friday</td>
              <td class="Friday"></td>
            </tr>
            <tr>
              <td>Saturday</td>
              <td class="Saturday"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ========================= Previously created slot =========================== -->



  <!-- ======================== footer Part =========================== -->
  <footer id="footerpart">
    <div class="container">
      <div class="row">
        <div class="col-lg-5">
          <div class="footerTopLeft">
            <picture>
              <img src="./images/2.png" alt class="footer__logo" />
            </picture>
            <p class="mt-4 text-white footerTopLeft__p">We are always open to discuss and improve your online presence.
            </p>
          </div>
        </div>
        <div class="col-lg-7">
          <div class="footerRight offset-lg-1">
            <h3 class="footerRight__h3 text-white">Lets Digitalize!</h3>
            <p class="footerRight__p text-white my-3">“The biggest part of our digital transformation is changing the
              way we think.” — Simeon Preston.</p>
            <div class="icons text-white">
              <a href="#">
                <i class="fa-brands fa-facebook"></i>
              </a>
              <a href="#">
                <i class="fa-brands fa-twitter"></i>
              </a>
              <a href="#">
                <i class="fa-brands fa-instagram"></i>
              </a>
              <a href="#">
                <i class="fa-brands fa-linkedin"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <!-- ======================== footer Part =========================== -->

  <!-- Option 1: Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

  <script>
    $(document).ready(function () {
      $('#btnSubmit').on('click', function (event) {
        event.preventDefault(); // Prevent the form from submitting

        // Get selected days
        const selectedDays = [];
        $('input[type="checkbox"]:checked').each(function () {
          selectedDays.push($(this).val());
        });

        // Get start and end time
        const startTime = $('#start-time').val();
        const endTime = $('#end-time').val();

        // Validate time
        if (startTime >= endTime) {
          alert('Start time must be less than end time.');
          return;
        }

        // Prepare data to send
        const data = {
          days: selectedDays,
          start: startTime,
          end: endTime
        };

        // Send data to the server
        $.ajax({
          url: '/api/recurring-slots/reslot', // This should match the route defined in api.php
          type: 'POST',
          headers: { 'Authorization': 'Bearer ' + localStorage.getItem('jwt_token') },
          data: data,
          success: function (response) {
            console.log('Slots created:', response);
            location.reload();
            alert('Slots created successfully!');
          },
          error: function (err) {
            console.error('Error creating slots:', err);
            alert('Failed to create slots.');
          }
        });
      });
    });
  </script>
  <script>
    $(document).ready(function () {
      // Fetch created slots on page load
      $.ajax({
        url: '/api/recurring-slots/slots', // API endpoint to fetch slots
        type: 'GET',
        headers: { 'Authorization': 'Bearer ' + localStorage.getItem('jwt_token') },
        success: function (response) {
          // Clear existing slots
          $('#created-slots').empty();

          // Check if there are any slots
          if (response.length > 0) {
            // Loop through the slots and append them to the div
            response.forEach(function (slot) {
              ($('#booked-slots-table .' + slot.day).text() == ' ' || $('#booked-slots-table .' + slot.day).text() == '') ?
                $('#booked-slots-table .' + slot.day).append(slot.start + ' - ' + slot.end) :
                $('#booked-slots-table .' + slot.day).append(' , ' + slot.start + ' - ' + slot.end);

            })

          } else {
            $('#created-slots').append('<p>No slots created yet.</p>');
          }
        },
        error: function (err) {
          console.error('Error fetching slots:', err);
          alert('Failed to fetch slots.');
        }
      });

    });

    // Wait for the page to fully load
    window.addEventListener('load', () => {
      const loader = document.getElementById('loader');
      const content = document.getElementById('content');

      // Hide the loader and show the content
      loader.classList.add('hidden');
      content.style.display = 'block';
    });
  </script>
</body>

</html>